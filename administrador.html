<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREACTIVEPACK | MASTER ADMIN PRO v7.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Quicksand:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --neon: #00f2fe; --p: #ff007f; --bg: #050a18; --card: rgba(30, 41, 59, 0.7); 
            --success: #10b981; --warning: #f59e0b;
        }
        
        body { 
            font-family: 'Quicksand', sans-serif; background: var(--bg); color: white; 
            margin: 0; display: flex; flex-direction: column; min-height: 100vh;
            background-image: radial-gradient(circle at top right, #1e293b, #050a18);
        }

        /* HEADER PRO */
        header { 
            padding: 20px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 100;
        }
        header h1 { font-family: 'Orbitron', sans-serif; font-size: 1.2rem; margin: 0; letter-spacing: 2px; color: var(--neon); }

        /* TABS ESTILO APP */
        .nav-tabs { display: flex; background: rgba(15, 23, 42, 0.9); padding: 5px; gap: 5px; position: sticky; top: 60px; z-index: 99; }
        .tab-btn { 
            flex: 1; padding: 12px 5px; border: none; background: transparent; color: #64748b; 
            font-weight: bold; font-size: 0.65rem; border-radius: 10px; cursor: pointer; transition: 0.3s;
        }
        .tab-btn.active { background: var(--p); color: white; box-shadow: 0 0 15px var(--p); }

        .container { padding: 20px; padding-bottom: 120px; flex-grow: 1; }

        /* CARDS PRO */
        .glass-card { 
            background: var(--card); backdrop-filter: blur(15px); border-radius: 20px; 
            padding: 20px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 20px;
        }

        h2 { font-size: 0.9rem; color: var(--neon); text-transform: uppercase; margin-top: 0; display: flex; align-items: center; gap: 10px; }

        input, select, textarea { 
            width: 100%; padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid #334155; 
            border-radius: 12px; color: white; margin-bottom: 10px; box-sizing: border-box;
        }

        .btn-action { 
            width: 100%; padding: 15px; border-radius: 12px; border: none; font-weight: bold; 
            cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-cam { background: linear-gradient(45deg, #10b981, #059669); color: white; }
        .btn-add { background: var(--p); color: white; }

        /* VISTA PREVIA ITEMS */
        .item-preview { 
            display: flex; gap: 15px; background: rgba(255,255,255,0.05); padding: 10px; 
            border-radius: 15px; margin-bottom: 10px; border-left: 4px solid var(--neon);
        }
        .item-preview img { width: 60px; height: 60px; border-radius: 10px; object-fit: cover; }

        /* BOT√ìN FLOTANTE PUBLICAR */
        .publish-footer { 
            position: fixed; bottom: 0; width: 100%; background: rgba(5, 10, 24, 0.9); 
            padding: 15px; backdrop-filter: blur(10px); border-top: 1px solid rgba(255,255,255,0.1);
        }
        .btn-publish { 
            background: linear-gradient(45deg, var(--neon), #7000ff); color: white; 
            width: 90%; margin-left: 5%; padding: 18px; border-radius: 15px; font-weight: bold; 
            font-size: 1.1rem; border: none; box-shadow: 0 0 20px rgba(0, 242, 254, 0.4);
        }
    </style>
</head>
<body>

    <header>
        <h1>CREACTIVEPACK <span style="font-size: 0.6rem; vertical-align: middle; opacity: 0.5;">PRO ADMIN 7.0</span></h1>
    </header>

    <nav class="nav-tabs">
        <button class="tab-btn active" onclick="showTab('tecni')">‚öôÔ∏è TECNI</button>
        <button class="tab-btn" onclick="showTab('regalos')">üéÅ REGALOS</button>
        <button class="tab-btn" onclick="showTab('ads')">üì¢ ANUNCIOS</button>
        <button class="tab-btn" onclick="showTab('list')">üìã REVISAR</button>
    </nav>

    <div class="container">
        
        <div class="glass-card">
            <h2>üì∏ MULTIMEDIA</h2>
            <div id="upStatus" style="font-size: 0.8rem; margin-bottom: 10px; text-align: center;">Toma una foto pro para tu web</div>
            <input type="file" id="camInput" accept="image/*" style="display:none" onchange="uploadPro(this)">
            <button class="btn-action btn-cam" onclick="document.getElementById('camInput').click()">üì∑ CAPTURAR PRODUCTO</button>
            <input type="hidden" id="tempUrl">
        </div>

        <div id="tecni" class="tab-content">
            <div class="glass-card">
                <h2>‚öôÔ∏è TECNISOLUCIONES</h2>
                <input type="text" id="tName" placeholder="Nombre (Ej: C√°mara Wi-Fi 360)">
                <input type="number" id="tPrice" placeholder="Precio RD$">
                <select id="tStock">
                    <option value="Disponible">üü¢ En Stock</option>
                    <option value="Agotado">üî¥ Agotado</option>
                </select>
                <button class="btn-action btn-add" onclick="pushItem('tName', 'tPrice', '#00f2fe', 'tStock')">A√ëADIR A LA WEB</button>
            </div>
        </div>

        <div id="regalos" class="tab-content" style="display:none">
            <div class="glass-card">
                <h2>üéÅ REGALOS Y DETALLES</h2>
                <input type="text" id="rName" placeholder="Ej: Caja Sorpresa Amor">
                <input type="number" id="rPrice" placeholder="Precio RD$">
                <button class="btn-action btn-add" onclick="pushItem('rName', 'rPrice', '#ff007f')">A√ëADIR A LA WEB</button>
            </div>
        </div>

        <div id="ads" class="tab-content" style="display:none">
            <div class="glass-card">
                <h2>üì¢ ANUNCIOS Y CHATS</h2>
                <input type="text" id="aName" placeholder="T√≠tulo del anuncio">
                <textarea id="aMsg" placeholder="Mensaje que recibir√°s en WhatsApp"></textarea>
                <button class="btn-action btn-add" onclick="pushItem('aName', null, '#ffec3d', null, 'aMsg')">CREAR ANUNCIO</button>
            </div>
        </div>

        <div id="list" class="tab-content" style="display:none">
            <div class="glass-card">
                <h2>üìã PRODUCTOS PARA PUBLICAR</h2>
                <div id="renderList"></div>
            </div>
        </div>

    </div>

    <div class="publish-footer">
        <button class="btn-publish" id="masterPublish">üöÄ PUBLICAR TODO AHORA</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAw4aqJDVXyPnwv4se7J_cmJVbnwRw6gYw",
            authDomain: "creactivepackweb.firebaseapp.com",
            projectId: "creactivepackweb",
            storageBucket: "creactivepackweb.firebasestorage.app",
            messagingSenderId: "100899007718",
            appId: "1:100899007718:web:ea20959af8421e756b9f27"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // API IMGBB (Aseg√∫rate de tener tu key)
        const IMGBB_API = "TU_API_KEY_AQUI"; 

        window.uploadPro = async (input) => {
            const file = input.files[0];
            const status = document.getElementById('upStatus');
            status.innerHTML = "‚è≥ SUBIENDO A LA NUBE...";
            
            const formData = new FormData();
            formData.append("image", file);

            try {
                const res = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API}`, {
                    method: "POST",
                    body: formData
                });
                const data = await res.json();
                document.getElementById('tempUrl').value = data.data.url;
                status.innerHTML = "‚úÖ FOTO PROCESADA CON √âXITO";
            } catch (e) { status.innerHTML = "‚ùå ERROR AL SUBIR"; }
        }

        window.showTab = (id) => {
            document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).style.display = 'block';
            event.currentTarget.classList.add('active');
        }

        window.pushItem = (idN, idP, color, idS = null, idM = null) => {
            const name = document.getElementById(idN).value;
            const price = idP ? document.getElementById(idP).value : null;
            const img = document.getElementById('tempUrl').value;
            const stock = idS ? document.getElementById(idS).value : "Disponible";
            const msg = idM ? document.getElementById(idM).value : "";

            if(!name || !img) return alert("¬°Falta la foto o el nombre!");

            const div = document.createElement('div');
            div.className = "item-preview";
            div.style.borderLeftColor = color;
            div.innerHTML = `
                <img src="${img}">
                <div>
                    <b style="color:white">${name}</b><br>
                    ${price ? `<span style="color:var(--success)">RD$ ${price}</span>` : ''}
                    <small style="display:block; color:gray; font-size:0.6rem;">Estado: ${stock}</small>
                </div>
            `;
            document.getElementById('renderList').prepend(div);
            
            // Limpieza pro
            document.getElementById(idN).value = "";
            if(idP) document.getElementById(idP).value = "";
            alert("A√±adido a la lista de espera");
        }

        document.getElementById('masterPublish').onclick = async () => {
            const html = document.getElementById('renderList').innerHTML;
            if(!html) return alert("No hay nada que publicar");
            
            try {
                await setDoc(doc(db, "configuracion", "web_data"), {
                    htmlEstructura: html,
                    ultimaActualizacion: new Date().getTime()
                });
                alert("üöÄ ¬°WEB ACTUALIZADA! Cambios aplicados con √©xito.");
                location.reload();
            } catch (e) { alert("Error de conexi√≥n"); }
        }
    </script>
</body>
</html>
